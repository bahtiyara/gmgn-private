import { AppFrame } from '@/components/app-frame';
import st from './home.module.scss';
import { useEffect } from 'react';
import { useTokenStore } from '@/store/token';
import { IconSettings } from '@/icons/settings';
import { TokenItem } from '@/components/token-item';

export function HomePage() {
	const fetchTokens = useTokenStore((s) => s.fetchTokens);
	const tokens = useTokenStore((s) => s.tokens);

	useEffect(() => {
		const interval = fetchTokens();

		return () => {
			window.clearInterval(interval);
		};
		// eslint-disable-next-line react-hooks/exhaustive-deps
	}, []);

	return (
		<AppFrame>
			<Toolbar />
			{!!tokens && (
				<div className={st.body}>
					{tokens.map(({ title, data }, index) => (
						<div className={st.col} key={title}>
							<div className={st.colHeader}>
								<div className={st.left}>{title}</div>
								<Controls defaultSolValue={index === 1 ? '' : '0'} />
							</div>
							<div className={st.colList}>
								{data.map((i, index) => (
									<TokenItem data={i} key={index} />
								))}
							</div>
						</div>
					))}
				</div>
			)}
		</AppFrame>
	);
}

const Toolbar = () => (
	<div className={st.toolbar}>
		<div className={st.left}>
			<span style={{ fontSize: 14, lineHeight: '18px' }}>ðŸª–</span>
			<span style={{ fontSize: 16, fontWeight: 600, lineHeight: '36px' }}>
				Trenches
			</span>
			<ChevronDown2 />
		</div>
		<div className={st.right}>
			<IconCustomize />
			<span>Customize</span>
			<IconSearch />
			<span>Filter</span>
			<div className={st.settingsContainer}>
				<IconSettings width={'14px'} height={'14px'} />
			</div>
		</div>
	</div>
);

const Controls = ({ defaultSolValue }: { defaultSolValue: string }) => (
	<div className={st.controls}>
		<div className={st.sol}>
			<IconSolana />
			<input type="text" defaultValue={defaultSolValue} />
		</div>
		<div
			style={{
				padding: 6,
				display: 'flex',
				color: 'var(--color-f2)',
				backgroundColor: 'rgb(31, 32, 36)',
			}}>
			<IconVoice />
		</div>
		<IconFilter />
	</div>
);

const ChevronDown2 = () => (
	<svg
		width="12"
		height="12"
		viewBox="0 0 12 12"
		xmlns="http://www.w3.org/2000/svg"
		style={{ marginLeft: 9.5, marginTop: 1.5 }}
		fill="currentColor">
		<path
			fill-rule="evenodd"
			clip-rule="evenodd"
			d="M1.46967 3.46967C1.76256 3.17678 2.23744 3.17678 2.53033 3.46967L6 6.93934L9.46967 3.46967C9.76256 3.17678 10.2374 3.17678 10.5303 3.46967C10.8232 3.76256 10.8232 4.23744 10.5303 4.53033L6.53033 8.53033C6.23744 8.82322 5.76256 8.82322 5.46967 8.53033L1.46967 4.53033C1.17678 4.23744 1.17678 3.76256 1.46967 3.46967Z"></path>
	</svg>
);

const IconCustomize = () => (
	<svg
		width="16px"
		height="16px"
		viewBox="0 0 16 16"
		xmlns="http://www.w3.org/2000/svg"
		fill="currentColor">
		<path d="M8.50537 2.81299C8.50537 2.2607 8.95309 1.81299 9.50537 1.81299H14.0763C14.6286 1.81299 15.0763 2.2607 15.0763 2.81299 15.0763 3.36527 14.6286 3.81299 14.0763 3.81299H9.50537C8.95309 3.81299 8.50537 3.36527 8.50537 2.81299ZM8.50537 8.10646C8.50537 7.55417 8.95309 7.10646 9.50537 7.10646H14.0716C14.6239 7.10646 15.0716 7.55417 15.0716 8.10646 15.0716 8.65874 14.6239 9.10646 14.0716 9.10646H9.50537C8.95309 9.10646 8.50537 8.65874 8.50537 8.10646ZM8.50537 13.3994C8.50537 12.8471 8.95309 12.3994 9.50537 12.3994H14.0972C14.6495 12.3994 15.0972 12.8471 15.0972 13.3994 15.0972 13.9517 14.6495 14.3994 14.0972 14.3994H9.50537C8.95309 14.3994 8.50537 13.9517 8.50537 13.3994Z"></path>
		<rect
			x="0.938477"
			y="0.999695"
			width="5.80234"
			height="5.80234"
			rx="1.6"></rect>
		<path d="M5.14062 13.9995V14.9995H2.53809V13.9995H5.14062ZM5.74121 13.3989V10.7964C5.741 10.4652 5.47187 10.1968 5.14062 10.1968H2.53809C2.20702 10.197 1.93869 10.4653 1.93848 10.7964V13.3989C1.93848 13.7302 2.20689 13.9993 2.53809 13.9995V14.9995L2.375 14.9907C1.62201 14.9143 1.02287 14.3159 0.946289 13.563L0.938477 13.3989V10.7964C0.938674 9.96808 1.56824 9.28644 2.375 9.20459L2.53809 9.19678H5.14062L5.30469 9.20459C6.11126 9.28662 6.74101 9.96822 6.74121 10.7964V13.3989L6.73242 13.563C6.65583 14.3158 6.05747 14.9141 5.30469 14.9907L5.14062 14.9995V13.9995C5.472 13.9995 5.74121 13.7303 5.74121 13.3989Z"></path>
	</svg>
);

const IconSearch = () => (
	<svg
		width="16px"
		height="16px"
		viewBox="0 0 16 16"
		xmlns="http://www.w3.org/2000/svg"
		style={{ marginLeft: 4 }}
		fill="currentColor">
		<path d="M.505493 2.81299C.505493 2.2607.953208 1.81299 1.50549 1.81299H14.0764C14.6287 1.81299 15.0764 2.2607 15.0764 2.81299 15.0764 3.36527 14.6287 3.81299 14.0764 3.81299H1.50549C.953209 3.81299.505493 3.36527.505493 2.81299ZM12.438 11.3674C12.8285 10.9769 13.4617 10.9769 13.8522 11.3674L15.6357 13.1509C16.0262 13.5414 16.0262 14.1746 15.6357 14.5651 15.2451 14.9556 14.612 14.9556 14.2214 14.5651L12.438 12.7816C12.0475 12.3911 12.0475 11.7579 12.438 11.3674ZM.505493 8.10646C.505493 7.55417.953208 7.10646 1.50549 7.10646H4.86826C5.42054 7.10646 5.86826 7.55417 5.86826 8.10646 5.86826 8.65874 5.42054 9.10646 4.86826 9.10646H1.50549C.953208 9.10646.505493 8.65874.505493 8.10646ZM.505493 13.3994C.505493 12.8471.953208 12.3994 1.50549 12.3994H3.00177C3.55405 12.3994 4.00177 12.8471 4.00177 13.3994 4.00177 13.9517 3.55405 14.3994 3.00177 14.3994H1.50549C.953208 14.3994.505493 13.9517.505493 13.3994Z"></path>
		<path d="M10.9064 13.8581C13.1278 13.8581 14.9286 12.0573 14.9286 9.83597C14.9286 7.6146 13.1278 5.81382 10.9064 5.81382C8.68505 5.81382 6.88428 7.6146 6.88428 9.83597C6.88428 12.0573 8.68505 13.8581 10.9064 13.8581ZM10.9064 11.9165C9.75734 11.9165 8.82583 10.985 8.82583 9.83597C8.82583 8.68689 9.75734 7.75538 10.9064 7.75538C12.0555 7.75538 12.987 8.68689 12.987 9.83597C12.987 10.985 12.0555 11.9165 10.9064 11.9165Z"></path>
	</svg>
);

const IconSolana = () => (
	<svg
		width="12px"
		height="12px"
		viewBox="0 0 14 14"
		fill="currentColor"
		xmlns="http://www.w3.org/2000/svg">
		<path
			d="M2.65637 9.70688C2.73557 9.62768 2.84447 9.58148 2.95996 9.58148H13.4338C13.6252 9.58148 13.7209 9.81247 13.5856 9.94777L11.5165 12.0168C11.4373 12.096 11.3284 12.1422 11.213 12.1422H0.739144C0.547751 12.1422 0.452055 11.9112 0.58735 11.7759L2.65637 9.70688Z"
			fill="#B04BEC"></path>
		<path
			d="M2.65631 1.98379C2.73881 1.9046 2.8477 1.8584 2.9599 1.8584H13.4337C13.6251 1.8584 13.7208 2.08939 13.5855 2.22468L11.5165 4.29371C11.4373 4.3729 11.3284 4.4191 11.2129 4.4191H0.739083C0.54769 4.4191 0.451994 4.18811 0.587289 4.05282L2.65631 1.98379Z"
			fill="#30CDB7"></path>
		<path
			d="M11.5165 5.82297C11.4373 5.74377 11.3284 5.69757 11.213 5.69757H0.739144C0.547751 5.69757 0.452055 5.92856 0.58735 6.06386L2.65637 8.13288C2.73557 8.21208 2.84447 8.25827 2.95996 8.25827H13.4338C13.6252 8.25827 13.7209 8.02728 13.5856 7.89199L11.5165 5.82297Z"
			fill="#718CD2"></path>
	</svg>
);
const IconFilter = () => (
	<svg
		width="14px"
		height="14px"
		viewBox="0 0 16 16"
		xmlns="http://www.w3.org/2000/svg"
		fill="currentColor"
		className={st.iconFilter}>
		<path d="M1.05151 2.01938C1.05151 1.6604 1.34253 1.36938 1.70151 1.36938H14.2997C14.6587 1.36938 14.9497 1.6604 14.9497 2.01938V3.75415C14.9497 4.17594 14.7882 4.58171 14.4983 4.88811L10.6775 8.92663V12.2919C10.6775 12.5035 10.5745 12.702 10.4013 12.8237L6.42047 15.6214C6.222 15.7609 5.96236 15.7782 5.74709 15.6664C5.53181 15.5546 5.39672 15.3322 5.39672 15.0896V8.92982L1.51256 4.89331C1.21676 4.58589 1.05151 4.17585 1.05151 3.74923V2.01938ZM2.35151 2.66938V3.74923C2.35151 3.83973 2.38656 3.92671 2.44931 3.99192L6.48715 8.18814C6.62161 8.32787 6.69672 8.51425 6.69672 8.70817V13.8383L9.37754 11.9542V8.70768C9.37754 8.51596 9.45096 8.33152 9.58273 8.19225L13.554 3.99468C13.6154 3.92969 13.6497 3.84362 13.6497 3.75415V2.66938H2.35151Z" />
	</svg>
);
const IconVoice = () => (
	<svg
		width="12"
		height="12"
		viewBox="0 0 16 16"
		xmlns="http://www.w3.org/2000/svg"
		fill="currentColor">
		<path d="M15.0761 4.40954C15.4753 5.23957 15.8685 6.4514 15.8685 7.99993 15.8685 9.54846 15.4753 10.7603 15.0761 11.5903 14.8514 12.0576 14.5752 12.5049 14.2418 12.9024 13.9996 13.1673 13.5884 13.1856 13.3235 12.9433 13.0593 12.7017 13.0404 12.2922 13.2805 12.0272L13.2864 12.0205C13.3315 11.9682 13.6164 11.626 13.9046 11.0269 14.2335 10.3429 14.5685 9.32286 14.5685 7.99993 14.5685 6.677 14.2335 5.65697 13.9046 4.97299 13.6575 4.45937 13.3982 4.1036 13.3047 3.98822 13.1634 3.78029 13.074 3.32011 13.4492 3.06636 13.7444 2.8667 14.0961 2.92329 14.3203 3.17965 14.4245 3.30044 14.7271 3.68393 15.0761 4.40954ZM12.0103 5.27409C12.1048 5.41125 12.2264 5.60785 12.3468 5.8593 12.5876 6.36243 12.8258 7.09042 12.8258 7.99994 12.8258 8.90946 12.5876 9.63746 12.3468 10.1406 12.1661 10.5179 11.9835 10.7707 11.8915 10.8876 11.6053 11.2508 11.0879 11.1687 10.915 11.0161 10.6491 10.7813 10.6139 10.4479 10.8575 10.0992 11.256 9.52863 11.5041 8.76872 11.504 7.99994 11.5039 7.25226 11.2669 6.49619 10.8549 5.89777 10.7302 5.71662 10.6357 5.23822 10.9831 4.98814 11.3306 4.73806 11.6999 4.88998 11.8332 5.04172 11.8861 5.10193 11.9338 5.16318 12.0103 5.27409Z"></path>
		<path d="M1.37268 0.489697C1.62652 0.235856 2.03807 0.235856 2.29191 0.489697L15.2876 13.4854C15.5415 13.7392 15.5415 14.1508 15.2876 14.4046C15.0338 14.6585 14.6222 14.6585 14.3684 14.4046L1.37268 1.40894C1.11883 1.15509 1.11883 0.743538 1.37268 0.489697Z"></path>
		<path d="M9.11587 1.82161C9.11587.744366 7.77482.266065 7.08679 1.08183L5.28576 3.21722C5.10919 3.42656 4.84927 3.54737 4.57541 3.54737H3.50914L4.79801 4.83624C5.37163 4.77871 5.9041 4.50045 6.2795 4.05536L7.81587 2.23377V7.85409L9.11587 9.15409V1.82161ZM9.11587 10.9926 7.81587 9.69257V13.771L6.27866 11.9549C5.85509 11.4545 5.23271 11.1659 4.5771 11.1659H2.09102C1.6768 11.1659 1.34102 10.8301 1.34102 10.4159V5.59737C1.34102 5.18315 1.6768 4.84737 2.09102 4.84737H2.97067L1.70664 3.58334C.758186 3.76326.0410156 4.59656.0410156 5.59737V10.4159C.0410156 11.5481.958831 12.4659 2.09102 12.4659H4.5771C4.85039 12.4659 5.10983 12.5862 5.2864 12.7948L7.0881 14.9233C7.77693 15.7371 9.11587 15.2582 9.11587 14.182V10.9926Z"></path>
	</svg>
);
